-- puppet.lua
-- A simplified puppet without posable joints, but that
-- looks roughly humanoid.

rootnode = gr.node('root')

suitRed = gr.material({0.945, 0.0, 0.0}, {0.2, 0.2, 0.2}, 10)
blue = gr.material({0.0, 0.0, 1.0}, {0.1, 0.1, 0.1}, 10)
black = gr.material({0.0, 0.0, 0.0}, {1.0, 1.0, 1.0}, 20)
teethWhite = gr.material({1.0, 1.0, 1.0}, {0.1, 0.1, 0.1}, 100)
white = gr.material({1.0, 1.0, 1.0}, {0.1, 0.1, 0.1}, 10)
skin = gr.material({1.0, 0.7686, 0.5725}, {1.0, 1.0, 1.0}, 1000)
noseSkin = gr.material({249/255, 80/255, 99/255}, {0.8, 0.8, 0.8}, 1000)
goggles = gr.material({30/255, 36/255, 136/255}, {1.0, 1.0, 1.0}, 1)
goggleLens = gr.material({62/255, 183/255, 55/255}, {0.9, 0.9, 0.9}, 500)
hair = gr.material({210/255, 111/255, 10/255}, {0.1, 0.1, 0.1}, 1000)
cuffYellow = gr.material({241/255, 171/255, 0}, {0.1, 0.1, 0.1}, 1000)
suitYellow = gr.material({241/255, 210/255, 0}, {0.1, 0.1, 0.1}, 10)

torso = gr.mesh('sphere', 'torso')
rootnode:add_child(torso)
torso:set_material(black)
torso:scale(0.59,0.6,0.5);

torsoPin1 = gr.mesh('sphere', 'torsoPin1')
torso:add_child(torsoPin1)
torsoPin1:set_material(goggles)
torsoPin1:scale(0.08, 0.08, 0.08);
torsoPin1:translate(-0.25, -0.25, 0.33)

torsoPin2 = gr.mesh('sphere', 'torsoPin2')
torso:add_child(torsoPin2)
torsoPin2:set_material(goggles)
torsoPin2:scale(0.08, 0.08, 0.08);
torsoPin2:translate(0.25, -0.25, 0.33)

torsoShirt = gr.mesh('sphere', 'torsoShirt')
torso:add_child(torsoShirt)
torsoShirt:set_material(suitRed)
torsoShirt:scale(0.6, 0.62,0.51);
torsoShirt:translate(0.0, 0.05, 0.0)

shirtCube1 = gr.mesh('cube', 'shirtCube1')
torsoShirt:add_child(shirtCube1)
shirtCube1:set_material(suitYellow)
shirtCube1:scale(0.1, 0.1,0.1);
shirtCube1:translate(-0.15, 0.3, 0.435)

shirtCube2 = gr.mesh('cube', 'shirtCube2')
torsoShirt:add_child(shirtCube2)
shirtCube2:set_material(suitYellow)
shirtCube2:scale(0.1, 0.1,0.1);
shirtCube2:translate(-0.15, 0.1, 0.45)

shirtCube3 = gr.mesh('cube', 'shirtCube3')
torsoShirt:add_child(shirtCube3)
shirtCube3:set_material(suitYellow)
shirtCube3:scale(0.1, 0.1,0.1);
shirtCube3:translate(0.15, 0.3, 0.435)

shirtCube4 = gr.mesh('cube', 'shirtCube4')
torsoShirt:add_child(shirtCube4)
shirtCube4:set_material(suitYellow)
shirtCube4:scale(0.1, 0.1,0.1);
shirtCube4:translate(0.15, 0.1, 0.45)

-------- FACE ----------------------------------

neck = gr.mesh('sphere', 'neck')
torso:add_child(neck)
neck:scale(0.15, 0.2, 0.15)
neckJoint = gr.joint('neckJoint', {0,0,0}, {-90,0,90});
neck:add_child(neckJoint);
neck:translate(0.0, 0.6, 0.01)
neck:set_material(skin)

head = gr.mesh('sphere', 'head')
neckJoint:add_child(head)
head:scale(0.25, 0.25, 0.25)
head:translate(0.0, 0.8, 0.0)
head:set_material(skin)

nose = gr.mesh('sphere', 'nose')
head:add_child(nose)
nose:scale(0.06, 0.06, 0.14)
nose:rotate('x', 30)
nose:translate(0.0, 0.78, 0.22)
nose:set_material(noseSkin)

leftEye = gr.mesh('cylinder', 'leftEye')
head:add_child(leftEye)
leftEye:scale(0.11, 0.15, 0.11)
leftEye:rotate('x',90)
leftEye:translate(-0.16, 0.89, 0.1)
leftEye:set_material(goggles)

leftLens = gr.mesh('cylinder', 'leftLens')
leftEye:add_child(leftLens)
leftLens:scale(0.09, 0.15, 0.09)
leftLens:rotate('x',90)
leftLens:translate(-0.154, 0.877, 0.11)
leftLens:set_material(goggleLens)

rightEye = gr.mesh('cylinder', 'rightEye')
head:add_child(rightEye)
rightEye:scale(0.11, 0.15, 0.11)
rightEye:rotate('x', 90)
rightEye:translate(0.059, 0.89, 0.1)
rightEye:set_material(goggles)

rightLens = gr.mesh('cylinder', 'rightLens')
rightEye:add_child(rightLens)
rightLens:scale(0.09, 0.15, 0.09)
rightLens:rotate('x',90)
rightLens:translate(0.068, 0.877, 0.11)
rightLens:set_material(goggleLens)

leftEyebrow = gr.mesh('sphere', 'leftEyebrow')
head:add_child(leftEyebrow)
leftEyebrow:scale(0.05, 0.02, 0.01)
leftEyebrow:rotate('z',-45)
leftEyebrow:translate(-0.08, 0.89, 0.24)
leftEyebrow:set_material(hair)

rightEyebrow = gr.mesh('sphere', 'rightEyebrow')
head:add_child(rightEyebrow)
rightEyebrow:scale(0.05, 0.02, 0.01)
rightEyebrow:rotate('z',45)
rightEyebrow:translate(0.084, 0.89, 0.24)
rightEyebrow:set_material(hair)

leftMoustache = gr.mesh('suzanne', 'leftMoustache')
head:add_child(leftMoustache)
leftMoustache:scale(0.2, 0.04, 0.02)
leftMoustache:translate(-0.115, 0.735, 0.222)
leftMoustache:set_material(hair)

rightMoustache = gr.mesh('suzanne', 'rightMoustache')
head:add_child(rightMoustache)
rightMoustache:scale(0.2, 0.04, 0.02)
rightMoustache:translate(0.115, 0.735, 0.222)
rightMoustache:set_material(hair)

mouth = gr.mesh('cube', 'mouth')
head:add_child(mouth)
mouth:scale(0.15, 0.04, 0.02)
mouth:translate(0.0, 0.69, 0.21)
mouth:set_material(teethWhite)

---------- ARMS ------------------------------------------

leftShoulderJoint = gr.joint('leftShoulderJoint', {0,0,0}, {-45,0,45});
torso:add_child(leftShoulderJoint);

leftShoulder = gr.mesh('sphere', 'leftShoulder')
leftShoulderJoint:add_child(leftShoulder)
leftShoulder:scale(0.12, 0.12, 0.12)
leftUpperArmJoint = gr.joint('leftUpperArmJoint', {-30,0,30}, {0,0,0});
leftShoulder:add_child(leftUpperArmJoint);
leftShoulder:translate(-0.35, 0.55, 0.0)
leftShoulder:set_material(suitRed)

leftUpperArm = gr.mesh('sphere', 'leftUpperArm')
leftUpperArmJoint:add_child(leftUpperArm)
leftUpperArm:scale(0.4, 0.09, 0.09)
leftUpperArm:rotate('z', 30)
leftElbowJoint = gr.joint('leftElbowJoint', {-45,0,45}, {0,0,0});
leftUpperArm:add_child(leftElbowJoint);
leftUpperArm:translate(-0.65, 0.44, 0.0)
leftUpperArm:set_material(suitRed)

leftElbow = gr.mesh('sphere', 'leftElbow')
leftElbowJoint:add_child(leftElbow)
leftElbow:scale(0.08, 0.08, 0.08)
leftForearmJoint = gr.joint('leftForearmJoint', {0,0,0}, {-60,0,60});
leftElbow:add_child(leftForearmJoint);
leftElbow:translate(-0.93, 0.285, 0.0)
leftElbow:set_material(suitRed)

leftForearm = gr.mesh('sphere', 'leftForearm')
leftForearmJoint:add_child(leftForearm)
leftForearm:scale(0.4, 0.11, 0.11)
leftForearm:rotate('z', 90)
leftForearm:translate(-0.94, -0.05, 0.0)
leftForearm:set_material(suitRed)

leftCuff= gr.mesh('cylinder', 'leftCuff')
leftForearm:add_child(leftCuff)
leftCuff:scale(0.2, 0.15, 0.2)
leftWristJoint = gr.joint('leftWristJoint', {-60,0,90}, {0,60,0});
leftCuff:add_child(leftWristJoint);
leftCuff:translate(-1.04, -0.46, -0.11)
leftCuff:set_material(cuffYellow)

leftHand = gr.mesh('sphere', 'leftHand')
leftWristJoint:add_child(leftHand)
leftHand:rotate('y',90)
leftHand:scale(0.12, 0.12, 0.12)
leftHand:translate(-0.94, -0.55, 0.0)
leftHand:set_material(white)

finger1 = gr.mesh('sphere', 'finger1')
leftHand:add_child(finger1)
finger1:scale(0.2, 0.05, 0.05)
finger1:rotate('z', -25)
finger1:translate(-0.85, -0.55, 0.0)
finger1:set_material(white)

finger2 = gr.mesh('sphere', 'finger2')
leftHand:add_child(finger2)
finger2:scale(0.2, 0.05, 0.05)
finger2:rotate('z', 75)
finger2:translate(-1.04, -0.65, 0.0)
finger2:set_material(white)

finger3 = gr.mesh('sphere', 'finger3')
leftHand:add_child(finger3)
finger3:scale(0.2, 0.05, 0.05)
finger3:rotate('z', 90)
finger3:translate(-0.95, -0.7, 0.0)
finger3:set_material(white)

finger4 = gr.mesh('sphere', 'finger4')
leftHand:add_child(finger4)
finger4:scale(0.2, 0.05, 0.05)
finger4:rotate('z', 105)
finger4:translate(-0.85, -0.65, 0.0)
finger4:set_material(white)

leftHand:translate(0.94, 0.55, 0.0)
leftHand:rotate('y',-90)
leftHand:translate(-0.94, -0.55, 0.0)

rightShoulderJoint = gr.joint('rightShoulderJoint', {0,0,0}, {-45,0,45});
torso:add_child(rightShoulderJoint);

rightShoulder = gr.mesh('sphere', 'rightShoulder')
rightShoulderJoint:add_child(rightShoulder)
rightShoulder:scale(0.12, 0.12, 0.12)
rightUpperArmJoint = gr.joint('rightUpperArmJoint', {-30,0,30}, {0,0,0});
rightShoulder:add_child(rightUpperArmJoint);
rightShoulder:translate(0.35, 0.55, 0.0)
rightShoulder:set_material(suitRed)

rightUpperArm = gr.mesh('sphere', 'rightUpperArm')
rightUpperArmJoint:add_child(rightUpperArm)
rightUpperArm:scale(0.4, 0.09, 0.09)
rightUpperArm:rotate('z', -30)
rightElbowJoint = gr.joint('rightElbowJoint', {-45,0,45}, {0,0,0});
rightUpperArm:add_child(rightElbowJoint);
rightUpperArm:translate(0.65, 0.44, 0.0)
rightUpperArm:set_material(suitRed)

rightElbow = gr.mesh('sphere', 'rightElbow')
rightElbowJoint:add_child(rightElbow)
rightElbow:scale(0.08, 0.08, 0.08)
rightForearmJoint = gr.joint('rightForearmJoint', {0,0,0}, {-60,0,60});
rightElbow:add_child(rightForearmJoint);
rightElbow:translate(0.93, 0.285, 0.0)
rightElbow:set_material(suitRed)

rightForearm = gr.mesh('sphere', 'rightForearm')
rightForearmJoint:add_child(rightForearm)
rightForearm:scale(0.4, 0.11, 0.11)
rightForearm:rotate('z', 90)
rightForearm:translate(0.94, -0.05, 0.0)
rightForearm:set_material(suitRed)

rightCuff= gr.mesh('cylinder', 'rightCuff')
rightForearm:add_child(rightCuff)
rightCuff:scale(0.2, 0.15, 0.2)
rightWristJoint = gr.joint('rightWristJoint', {-60,0,90}, {0,0,0});
rightCuff:add_child(rightWristJoint);
rightCuff:translate(0.84, -0.46, -0.11)
rightCuff:set_material(cuffYellow)

rightHand = gr.mesh('sphere', 'rightHand')
rightWristJoint:add_child(rightHand)
rightHand:scale(0.12, 0.12, 0.12)
rightHand:translate(0.94, -0.55, 0.0)
rightHand:set_material(white)

finger1 = gr.mesh('sphere', 'finger1')
rightHand:add_child(finger1)
finger1:scale(0.2, 0.05, 0.05)
finger1:rotate('z', 25)
finger1:translate(0.85, -0.55, 0.0)
finger1:set_material(white)

finger2 = gr.mesh('sphere', 'finger2')
rightHand:add_child(finger2)
finger2:scale(0.2, 0.05, 0.05)
finger2:rotate('z', -75)
finger2:translate(1.04, -0.65, 0.0)
finger2:set_material(white)

finger3 = gr.mesh('sphere', 'finger3')
rightHand:add_child(finger3)
finger3:scale(0.2, 0.05, 0.05)
finger3:rotate('z', -90)
finger3:translate(0.95, -0.7, 0.0)
finger3:set_material(white)

finger4 = gr.mesh('sphere', 'finger4')
rightHand:add_child(finger4)
finger4:scale(0.2, 0.05, 0.05)
finger4:rotate('z', -105)
finger4:translate(0.85, -0.65, 0.0)
finger4:set_material(white)

leftHand:translate(-0.94, 0.55, 0.0)
leftHand:rotate('y',90)
leftHand:translate(0.94, -0.55, 0.0)

----------- LEGS ---------------------------------------------

leftHipJoint = gr.joint('leftHipJoint', {0,0,0}, {-45,0,45});
torso:add_child(leftHipJoint);

leftHip = gr.mesh('sphere', 'leftHip')
leftHipJoint:add_child(leftHip)
leftHip:scale(0.15, 0.15, 0.15)
leftThighJoint = gr.joint('leftThighJoint', {-30,0,30}, {0,0,0});
leftHip:add_child(leftThighJoint);
leftHip:translate(-0.28, -0.52, 0.0)
leftHip:set_material(black)

leftThigh = gr.mesh('sphere', 'leftThigh')
leftThighJoint:add_child(leftThigh)
leftThigh:scale(0.4, 0.11, 0.11)
leftThigh:rotate('z', 70)
leftKneeJoint = gr.joint('leftKneeJoint', {0,0,0}, {-30,0,30});
leftThigh:add_child(leftKneeJoint);
leftThigh:translate(-0.41, -0.83, 0.0)
leftThigh:set_material(black)

leftKnee = gr.mesh('sphere', 'leftKnee')
leftKneeJoint:add_child(leftKnee)
leftKnee:scale(0.09, 0.09, 0.09)
leftCalfJoint = gr.joint('leftCalfJoint', {-60,0,60}, {0,0,0});
leftKnee:add_child(leftCalfJoint);
leftKnee:translate(-0.53, -1.13, 0.0)
leftKnee:set_material(black)

leftCalf = gr.mesh('sphere', 'leftCalf')
leftCalfJoint:add_child(leftCalf)
leftCalf:scale(0.4, 0.10, 0.10)
leftCalf:rotate('z', 90)
leftAnkleJoint = gr.joint('leftAnkleJoint', {0,0,0}, {-30,0,30});
leftCalf:add_child(leftAnkleJoint);
leftCalf:translate(-0.53, -1.43, 0.0)
leftCalf:set_material(black)

leftAnkleBall = gr.mesh('sphere', 'leftAnkleBall')
leftCalf:add_child(leftAnkleBall)
leftAnkleBall:scale(0.05, 0.05, 0.05)
leftAnkleJoint = gr.joint('rightAnkleJoint', {0,0,0}, {-30,0,30});
leftAnkleBall:add_child(leftAnkleJoint);
leftAnkleBall:translate(-0.54, -1.75, 0.0)
leftAnkleBall:set_material(black)

leftFoot = gr.mesh('sphere', 'leftFoot')
leftAnkleJoint:add_child(leftFoot)
leftFoot:scale(0.3, 0.10, 0.10)
leftFoot:rotate('y', 45)
leftFoot:translate(-0.7, -1.76, 0.18)
leftFoot:set_material(black)

rightHipJoint = gr.joint('leftAnkleJoint', {0,0,0}, {-45,0,45});
torso:add_child(rightHipJoint);

rightHip = gr.mesh('sphere', 'rightHip')
rightHipJoint:add_child(rightHip)
rightHip:scale(0.15, 0.15, 0.15)
rightThighJoint = gr.joint('rightThighJoint', {0,0,0}, {-30,0,30});
rightHip:add_child(rightThighJoint);
rightHip:translate(0.28, -0.52, 0.0)
rightHip:set_material(black)

rightThigh = gr.mesh('sphere', 'rightThigh')
rightThighJoint:add_child(rightThigh)
rightThigh:scale(0.4, 0.11, 0.11)
rightThigh:rotate('z', -70)
rightKneeJoint = gr.joint('rightKneeJoint', {0,0,0}, {-30,0,30});
rightThigh:add_child(rightKneeJoint);
rightThigh:translate(0.41, -0.83, 0.0)
rightThigh:set_material(black)

rightKnee = gr.mesh('sphere', 'rightKnee')
rightKneeJoint:add_child(rightKnee)
rightKnee:scale(0.09, 0.09, 0.09)
rightCalfJoint = gr.joint('rightCalfJoint', {-60,0,60}, {0,0,0});
rightKnee:add_child(rightCalfJoint);
rightKnee:translate(0.53, -1.13, 0.0)
rightKnee:set_material(black)

rightCalf = gr.mesh('sphere', 'rightCalf')
rightCalfJoint:add_child(rightCalf)
rightCalf:scale(0.4, 0.10, 0.10)
rightCalf:rotate('z', -90)
rightCalf:translate(0.53, -1.43, 0.0)
rightCalf:set_material(black)

rightAnkleBall = gr.mesh('sphere', 'rightAnkleBall')
rightCalf:add_child(rightAnkleBall)
rightAnkleBall:scale(0.05, 0.05, 0.05)
rightAnkleJoint = gr.joint('rightAnkleJoint', {0,0,0}, {-30,0,30});
rightAnkleBall:add_child(rightAnkleJoint);
rightAnkleBall:translate(0.54, -1.75, 0.0)
rightAnkleBall:set_material(black)

rightFoot = gr.mesh('sphere', 'rightFoot')
rightAnkleJoint:add_child(rightFoot)
rightFoot:scale(0.3, 0.10, 0.10)
rightFoot:rotate('y', -45)
rightFoot:translate(0.7, -1.76, 0.18)
rightFoot:set_material(black)

rootnode:rotate('y', 0)
rootnode:scale( 0.2, 0.2, 0.2 )
rootnode:translate(0.0, 0.01, -1.0)

return rootnode
